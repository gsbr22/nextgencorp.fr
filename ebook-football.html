<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Guide du Footballeur - NextGenCorp</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <a href="index.html" class="logo">
                    <img src="images/nextlogo.png" alt="NextGenCorp Logo">
                </a>
                <ul class="nav-links">
                    <li><a href="about.html">À propos</a></li>
                    <li><a href="index.html#ebooks">Ebooks</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li id="auth-link">
                        <a href="login.html" class="btn" id="auth-btn">Connexion</a>
                        <div class="account-dropdown" id="account-dropdown">
                            <div class="account-info">
                                <p><strong>Mon compte</strong></p>
                                <p id="user-email"></p>
                                <p>Dernière connexion: <span id="last-login"></span></p>
                                <p>Achats: <span id="user-purchases">0</span></p>
                            </div>
                            <button id="logout-btn">Déconnexion</button>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="ebook-detail">
        <div class="container">
            <div class="ebook-container">
                <div class="ebook-cover">
                    <img src="images/guide_footballeur.png" alt="Le Guide du Footballeur">
                    <div class="ebook-price">16,99 €</div>
                </div>
                
                <div class="ebook-info">
                    <h1 class="ebook-title">Le Guide du Footballeur</h1>
                    <p class="ebook-description">
                        Notre ebook sur le football est un guide pratique conçu pour aider les joueurs et passionnés à améliorer leurs performances physiques et techniques. Inspiré par des années d'expérience et de ressources spécialisées, il propose des conseils clairs, des programmes d'entraînement efficaces et des astuces pour progresser tout en préservant son équilibre physique. Idéal pour ceux qui cherchent à atteindre leurs objectifs sur le terrain et à se dépasser.
                    </p>
                    
                    <div class="ebook-features">
                        <h3>Ce que vous trouverez dans ce guide :</h3>
                        <ul>
                            <li>Programmes d'entraînement complets</li>
                            <li>Techniques pour améliorer votre jeu</li>
                            <li>Conseils de préparation physique</li>
                            <li>Astuces pour la nutrition du sportif</li>
                            <li>Méthodes de récupération optimale</li>
                        </ul>
                    </div>     
                
                        <style>.pp-Y8ZWVRJJHNQZ6{text-align:center;border:none;border-radius:0.25rem;min-width:11.625rem;padding:0 2rem;height:2.625rem;font-weight:bold;background-color:#FFD140;color:#000000;font-family:"Helvetica Neue",Arial,sans-serif;font-size:1rem;line-height:1.25rem;cursor:pointer;}</style>
<form action="https://www.paypal.com/ncp/payment/Y8ZWVRJJHNQZ6" method="post" target="_blank" style="display:inline-grid;justify-items:center;align-content:start;gap:0.5rem;">
  <input class="pp-Y8ZWVRJJHNQZ6" type="submit" value="Acheter" />
  <img src=https://www.paypalobjects.com/images/Debit_Credit_APM.svg alt="cards" />
  <section> Optimisé par <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:0.875rem;vertical-align:middle;"/></section>
                    </form>
                    <p class="login-required">* Vous devez être connecté pour effectuer un achat</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>NextGenCorp</h3>
                    <img src="images/nextlogo.png" alt="Logo" class="footer-logo">
                    <div class="social-links">
                        <a href="https://www.instagram.com/le_guide_du_footballeur/"><i class="fab fa-instagram"></i></a>
                        <a href="https://www.tiktok.com/@nextgencorp"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Navigation</h3>
                    <ul>
                        <li><a href="about.html">À propos</a></li>
                        <li><a href="index.html#ebooks">Ebooks</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Légal</h3>
                    <ul>
                        <li><a href="legal.html">Mentions légales</a></li>
                        <li><a href="legal.html#cgv">CGV</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 NextGenCorp. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="js/script.js"></script>
    <script>
        // Configuration Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBzMi3F5vLM0bYxTY1KuBJf7eD6Nx96wsQ",
            authDomain: "login-ec53a.firebaseapp.com",
            projectId: "login-ec53a",
            storageBucket: "login-ec53a.appspot.com",
            messagingSenderId: "123644267529",
            appId: "1:123644267529:web:5409efdf896971c655bcd8"
        };

        // Initialisation Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Gestion de l'affichage utilisateur
        function updateAuthUI(user) {
            const authBtn = document.getElementById('auth-btn');
            const accountDropdown = document.getElementById('account-dropdown');
            
            if (user) {
                // Utilisateur connecté
                authBtn.textContent = 'Mon compte';
                authBtn.href = '#';
                accountDropdown.style.display = 'block';
                
                // Récupération des infos utilisateur
                db.collection('users').doc(user.uid).get().then(doc => {
                    if (doc.exists) {
                        const userData = doc.data();
                        document.getElementById('user-email').textContent = user.email;
                        document.getElementById('last-login').textContent = 
                            new Date(userData.lastLogin.toDate()).toLocaleString();
                        document.getElementById('user-purchases').textContent = 
                            userData.purchases ? userData.purchases.length : 0;
                    }
                });
                
                // Gestion du clic sur "Mon compte"
                authBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    accountDropdown.style.display = 
                        accountDropdown.style.display === 'block' ? 'none' : 'block';
                });
            } else {
                // Utilisateur non connecté
                authBtn.textContent = 'Connexion';
                authBtn.href = 'login.html';
                accountDropdown.style.display = 'none';
            }
        }

        // Vérification de l'état d'authentification
        auth.onAuthStateChanged(user => {
            updateAuthUI(user);
            
            // Gestion du formulaire d'achat
            const purchaseForm = document.getElementById('purchase-form');
            if (purchaseForm) {
                purchaseForm.addEventListener('submit', function(e) {
                    if (!user) {
                        e.preventDefault();
                        alert('Veuillez vous connecter pour effectuer un achat');
                        window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.href);
                    }
                });
            }
        });

        // Déconnexion
        document.getElementById('logout-btn').addEventListener('click', function() {
            auth.signOut().then(() => {
                window.location.href = 'index.html';
            });
        });
    </script>
</body>
</html>
